!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.freighterApi=r():e.freighterApi=r()}(this,(function(){return function(e){var r={};function t(o){if(r[o])return r[o].exports;var E=r[o]={i:o,l:!1,exports:{}};return e[o].call(E.exports,E,E.exports,t),E.l=!0,E.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var E in e)t.d(o,E,function(r){return e[r]}.bind(null,E));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";var o,E;t.r(r),function(e){e.CREATE_ACCOUNT="CREATE_ACCOUNT",e.FUND_ACCOUNT="FUND_ACCOUNT",e.ADD_ACCOUNT="ADD_ACCOUNT",e.IMPORT_ACCOUNT="IMPORT_ACCOUNT",e.IMPORT_HARDWARE_WALLET="IMPORT_HARDWARE_WALLET",e.LOAD_ACCOUNT="LOAD_ACCOUNT",e.MAKE_ACCOUNT_ACTIVE="MAKE_ACCOUNT_ACTIVE",e.UPDATE_ACCOUNT_NAME="UPDATE_ACCOUNT_NAME",e.GET_MNEMONIC_PHRASE="GET_MNEMONIC_PHRASE",e.CONFIRM_MNEMONIC_PHRASE="CONFIRM_MNEMONIC_PHRASE",e.RECOVER_ACCOUNT="RECOVER_ACCOUNT",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD",e.REJECT_ACCESS="REJECT_ACCESS",e.GRANT_ACCESS="GRANT_ACCESS",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.HANDLE_SIGNED_HW_TRANSACTION="HANDLE_SIGNED_HW_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.SIGN_FREIGHTER_TRANSACTION="SIGN_FREIGHTER_TRANSACTION",e.SIGN_FREIGHTER_SOROBAN_TRANSACTION="SIGN_FREIGHTER_SOROBAN_TRANSACTION",e.ADD_RECENT_ADDRESS="ADD_RECENT_ADDRESS",e.LOAD_RECENT_ADDRESSES="LOAD_RECENT_ADDRESSES",e.SIGN_OUT="SIGN_OUT",e.SHOW_BACKUP_PHRASE="SHOW_BACKUP_PHRASE",e.SAVE_SETTINGS="SAVE_SETTINGS",e.LOAD_SETTINGS="LOAD_SETTINGS",e.GET_CACHED_ASSET_ICON="GET_CACHED_ASSET_ICON",e.CACHE_ASSET_ICON="CACHE_ASSET_ICON",e.GET_CACHED_ASSET_DOMAIN="GET_CACHED_ASSET_DOMAIN",e.CACHE_ASSET_DOMAIN="CACHE_ASSET_DOMAIN",e.GET_BLOCKED_ACCOUNTS="GET_BLOCKED_ACCOUNTS",e.GET_BLOCKED_DOMAINS="GET_BLOCKED_DOMAINS",e.ADD_CUSTOM_NETWORK="ADD_CUSTOM_NETWORK",e.CHANGE_NETWORK="CHANGE_NETWORK",e.REMOVE_CUSTOM_NETWORK="REMOVE_CUSTOM_NETWORK",e.EDIT_CUSTOM_NETWORK="EDIT_CUSTOM_NETWORK",e.RESET_EXP_DATA="RESET_EXP_DATA",e.ADD_TOKEN_ID="ADD_TOKEN_ID",e.GET_TOKEN_IDS="GET_TOKEN_IDS"}(o||(o={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.SUBMIT_TRANSACTION="SUBMIT_TRANSACTION",e.REQUEST_NETWORK="REQUEST_NETWORK",e.REQUEST_NETWORK_DETAILS="REQUEST_NETWORK_DETAILS",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS",e.REQUEST_ALLOWED_STATUS="REQUEST_ALLOWED_STATUS",e.SET_ALLOWED_STATUS="SET_ALLOWED_STATUS",e.REQUEST_USER_INFO="REQUEST_USER_INFO"}(E||(E={}));const n=e=>{const r=Date.now()+Math.random();return window.postMessage({source:"FREIGHTER_EXTERNAL_MSG_REQUEST",messageId:r,...e},window.location.origin),new Promise(t=>{let o=0;e.type===E.REQUEST_CONNECTION_STATUS&&(o=setTimeout(()=>{t({isConnected:!1}),window.removeEventListener("message",n)},2e3));const n=e=>{var E,T;e.source===window&&"FREIGHTER_EXTERNAL_MSG_RESPONSE"===(null===(E=null==e?void 0:e.data)||void 0===E?void 0:E.source)&&(null===(T=null==e?void 0:e.data)||void 0===T?void 0:T.messagedId)===r&&(t(e.data),window.removeEventListener("message",n),clearTimeout(o))};window.addEventListener("message",n,!1)})},T=()=>O?(async()=>{let e={publicKey:"",error:""};try{e=await n({type:E.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:r,error:t}=e;if(t)throw t;return r})():Promise.resolve(""),_=(e,r)=>O?(async(e,r,t)=>{let o="",T="",_="";"object"==typeof r?(o=r.network||"",T=r.accountToSign||"",_=r.networkPassphrase||""):(o=r||"",T=t||"");let S={signedTransaction:"",error:""};try{S=await n({transactionXdr:e,network:o,networkPassphrase:_,accountToSign:T,type:E.SUBMIT_TRANSACTION})}catch(e){console.error(e)}const{signedTransaction:A,error:N}=S;if(N)throw N;return A})(e,r):Promise.resolve(""),S=()=>O?window.freighter?Promise.resolve(window.freighter):(async()=>{let e={isConnected:!1};try{e=await n({type:E.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})():Promise.resolve(!1),A=()=>O?(async()=>{let e={network:"",error:""};try{e=await n({type:E.REQUEST_NETWORK})}catch(e){console.error(e)}const{network:r,error:t}=e;if(t)throw t;return r})():Promise.resolve(""),N=()=>O?(async()=>{let e={networkDetails:{network:"",networkName:"",networkUrl:"",networkPassphrase:""},error:""};try{e=await n({type:E.REQUEST_NETWORK_DETAILS})}catch(e){console.error(e)}const{networkDetails:r,error:t}=e,{network:o,networkUrl:T,networkPassphrase:_}=r;if(t)throw t;return{network:o,networkUrl:T,networkPassphrase:_}})():Promise.resolve({network:"",networkUrl:"",networkPassphrase:""}),s=()=>O?(async()=>{let e={isAllowed:!1};try{e=await n({type:E.REQUEST_ALLOWED_STATUS})}catch(e){console.error(e)}return e.isAllowed})():Promise.resolve(!1),i=()=>O?(async()=>{let e={isAllowed:!1,error:""};try{e=await n({type:E.SET_ALLOWED_STATUS})}catch(e){console.error(e)}const{isAllowed:r,error:t}=e;if(t)throw t;return r})():Promise.resolve(!1),C=()=>O?(async()=>{let e={userInfo:{publicKey:""},error:""};try{e=await n({type:E.REQUEST_USER_INFO})}catch(e){console.error(e)}const{userInfo:r,error:t}=e;if(t)throw t;return r})():Promise.resolve({publicKey:""});t.d(r,"isBrowser",(function(){return O})),t.d(r,"getPublicKey",(function(){return T})),t.d(r,"signTransaction",(function(){return _})),t.d(r,"isConnected",(function(){return S})),t.d(r,"getNetwork",(function(){return A})),t.d(r,"getNetworkDetails",(function(){return N})),t.d(r,"isAllowed",(function(){return s})),t.d(r,"setAllowed",(function(){return i})),t.d(r,"getUserInfo",(function(){return C}));const O="undefined"!=typeof window;r.default={getPublicKey:T,signTransaction:_,isConnected:S,getNetwork:A,getNetworkDetails:N,isAllowed:s,setAllowed:i,getUserInfo:C}}])}));
//# sourceMappingURL=index.min.js.map